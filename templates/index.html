<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Yajuneta – Verificador</title>

<style>
body {
  background:#0b0b0b;
  color:white;
  font-family:Arial, Helvetica, sans-serif;
  padding:40px;
}

h2 { margin-bottom:30px; }

.upload {
  border:1px dashed #666;
  padding:20px;
  margin-bottom:20px;
}

button {
  padding:10px 25px;
  font-size:16px;
  cursor:pointer;
}

button:hover {
  background:#0a2cff;
  color:white;
}

#resultado {
  margin-top:30px;
  white-space:pre-wrap;
}
</style>
</head>

<body>

<h2>Verificar errores de precio</h2>

<form id="form">
  <div class="upload">
    <label>PDF de ofertas</label><br>
    <input type="file" name="pdf" accept=".pdf" required>
  </div>

  <div class="upload">
    <label>Excel de precios</label><br>
    <input type="file" name="excel" accept=".xlsx" required>
  </div>

  <button type="submit">Verificar</button>
</form>

<pre id="resultado"></pre>

<script>
const form = document.getElementById("form");
const resultado = document.getElementById("resultado");

form.addEventListener("submit", async (e) => {
  e.preventDefault();

  resultado.textContent = "Analizando con IA...";

  const formData = new FormData(form);

  try {
    const response = await fetch("/check", {
      method: "POST",
      body: formData
    });

    const data = await response.json();

    resultado.textContent = data.ok
      ? data.message
      : "Error: " + data.error;

  } catch {
    resultado.textContent = "Error de conexión con el servidor";
  }
});
</script>

</body>
</html>
